## ElasticSearch

ES是一个分布式，可扩展，实时的搜索和数据分析引擎；不仅仅支持全文搜素，还支持结构化搜索，数据分析等；

ES特点：
- 一个分布式的实时文档存储引擎，每个字段都可以被索引和搜索；
- 一个分布式的实时分析搜索引擎，支持各种查询和聚合操作；
- 支持pb级别的结构化和非结构化数据；

## Redis集群方案略解？

Redis集群方案有三种，包括主从（master-slave）模式，哨兵（sentinel）模式，cluster模式；

主从模式：一个主库，一个或多个从库实例，能够实现读写分离，但不能自动故障转移；master主库会将每次的写命令发送到从库进行更新，保证主库和从库之间数据的一致性；

主库可以将数据同步到从库，进行读写分离，分担主库压力；不具备自动容错与恢复功能；不支持在线扩容，Redis容量受限单机配置；

哨兵模式（sentinel）：基于主从模式，引入哨兵监控与处理故障；监控master与slave是否正常运行，如果master出现故障，将选举出一个从库作为master；

哨兵模式原理是哨兵定时发送请求到master和slave进行确认；

哨兵模式继承主从模式的优点，另外master出现问题后，可以自动选举切换，可用性高；也继承了缺点，无法现在扩容，受限于单机容量限制；

Cluster（集群）模式：采用无中心化设计，多台服务器部署，最小配置（6台，3主3从），从节点作为备用节点，不提供请求，只做故障转移；

集群中各个节点都是平等关系，每个节点都保存各自的数据和整个集群状态；能够实现故障自动转移；可以在线扩容，节点可以动态添加删除；

缺点是数据通过异步复制，不能保证数据的强一致性；集群模式下只能使用一个库db0

总结：主从模式实现读写分离，但不能自动故障转移；哨兵模式基于主从模式，能够实现自动故障转移，但和主从模式一样，不能在线扩容，受到单机容量限制；集群模式通过无中心化架构，实现分布式存储，可进行在线扩展；

线上问题：
1. Hbase用来存储询价预估路径时，因为询价qps太多，而机器有线程数限制，超过了限制，导致oom