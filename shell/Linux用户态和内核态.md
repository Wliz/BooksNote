链接：https://zhuanlan.zhihu.com/p/69554144

通过系统调用将Linux整个体系分为用户态和和心态(或者说内核空间和用户空间）；

用户态就是提供应用程序运行的空间；

为了使应用程序访问到内核管理的资源如CPU，内存，IO，内核就必须提供一组通用的访问接口，这些接口就是系统调用。

内核必须通过一组通用的访问接口，这些接口就叫系统调用；

系统调用是操作系统的最小功能单位。库函数就是os提供的调用内核的资源的底层实现细节的封装；

用户态到内核态切换？

系统资源（内核资源）是固定的如内存，CPU，磁盘，网络接口，所以需要操作系统os对资源进行有效的的利用；

如果某个应用程序过分访问这些系统资源，会导致整个系统的资源被占用，如果不对资源访问进行限制和区分，就会导致资源访问冲突；所以Linux对不同的操作给与不同权限；

Linux操作系统将权限等级分为2个等级，分别就是内核态和用户态【应用程序运行空间】；

用户态的进程能够访问的资源受到极大的控制，而运行在内核态的进程可以为所欲为。

一个进程可以运行在用户态，也可以运行在内核态，那他们之间就存在用户态和内核态切换【进程，线程之间切换会进行现场保护和现场恢复，即上下文切换】，比较消耗性能；

上下文切换包括：
- 进程之中线程与线程之间的切换
- 进程与进程之间的切换
- 进程A的线程与进程B切换
- 进程A的线程与进程B的线程切换


用户态就是提供应用程序运行的空间，内核态就是系统提供的访问一些严格控制的资源访问的封装API接口；

synchronized 执行的时候调用pthread_mutex_lock，需要调用os内核api，而应用程序线程正在用户态执行，需要调用内核api，切换到内核态，此时需要os将用户态信息保存起来用户内核态执行结束后恢复，即上下文切换，比较消耗性能；